<!DOCTYPE HTML>
<html lang="en">
    <head>
        <meta charset="utf-8">
<title>Manage PHP versions with Phpbrew.</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="Install and configure Phpbrew.">
<meta name="author" content="enzo - Eduardo Garcia">

        <meta name="twitter:card" content="summary">
        <meta name="twitter:image" content="http://enzolutions.com/assets/img/spresso-logo.png">
    <meta name="twitter:title" content="Manage PHP versions with Phpbrew.">
    <meta name="twitter:description" content="Install and configure Phpbrew.">
    <meta name="twitter:creator" content="@enzolutions">

<meta property="og:locale" content="en_US">
<meta property="og:type" content="article">
<meta property="og:title" content="Manage PHP versions with Phpbrew.">
<meta property="og:description" content="Install and configure Phpbrew.">
<meta property="og:url" content="http://enzolutions.com/articles/2014/10/17/manage-php-versions-with-phpbrew/">
<meta property="og:site_name" content="[enzo]lutions">

<link href="http://enzolutions.com/rss.xml" type="application/rss+xml" rel="alternate" title="[enzo]lutions Feed">
<link rel="icon" type="image/x-icon" href="http://enzolutions.com/favicon.ico">
<link rel="apple-touch-icon" href="http://enzolutions.com/assets/img/touch-icon-iphone.png">
<link rel="apple-touch-icon" sizes="76x76" href="http://enzolutions.com/assets/img/touch-icon-ipad.png">
<link rel="apple-touch-icon" sizes="120x120" href="http://enzolutions.com/assets/img/touch-icon-iphone-retina.png">
<link rel="apple-touch-icon" sizes="152x152" href="http://enzolutions.com/assets/img/touch-icon-ipad-retina.png">


<link href="//netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet">
<link href="http://enzolutions.com/assets/css/bootstrap.css" rel="stylesheet" media="screen">
<link href="http://enzolutions.com/assets/css/style.css" rel="stylesheet" media="screen">
<link href="http://enzolutions.com/assets/css/theme.css" rel="stylesheet" media="screen">

<link rel="stylesheet" href="http://yandex.st/highlightjs/8.0/styles/default.min.css">
    </head>
    <body>
        <div id="wrap">
            <div class="navbar navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
        </button>
        <div class="navbar-brand">
            <a class="label label-primary" href="/">[enzo]lutions</a>
        </div>
      </div>
      <div class="collapse navbar-collapse">
        <ul class="nav navbar-nav">
        <li><a href="/">
        About</a>
    </li>
        <li><a href="/blog">
        Blog</a>
    </li>
        <li><a href="/company">
        Company</a>
    </li>
        <li><a href="/projects">
        Projects</a>
    </li>
        <li><a href="/talks">
        Talks</a>
    </li>
    </ul>
        <div class="navbar-social text-right">
          <ul class="list-inline">
        <li>
        <a target="_blank" href="https://twitter.com/enzolutions">
            <i class="fa fa-twitter fa-2x"></i>
        </a>
    </li>
    
        <li>
        <a target="_blank" href="https://www.facebook.com/enzolutions">
            <i class="fa fa-facebook-square fa-2x"></i>
        </a>
    </li>
    
        <li>
        <a target="_blank" href="cr.linkedin.com/in/edugarcia/">
            <i class="fa fa-linkedin-square fa-2x"></i>
        </a>
    </li>
    
    
        <li>
        <a target="_blank" href="https://github.com/enzolutions">
            <i class="fa fa-github fa-2x"></i>
        </a>
    </li>
    
    
    
        <li>
        <a target="_blank" href="mailto:enzo@enzolutions.com">
            <i class="fa fa-paper-plane fa-2x"></i>
        </a>
    </li>
    
        <li>
        <a target="_blank" href="http://enzolutions.com/rss.xml">
            <i class="fa fa-rss fa-2x"></i>
        </a>
    </li>
    </ul>
        </div>
      </div><!--/.nav-collapse -->
    </div>
</div>
            <div class="container">
                    <article class="post">
    <header>
        <h1>
            <a href="http://enzolutions.com/articles/2014/10/17/manage-php-versions-with-phpbrew/">Manage PHP versions with Phpbrew.</a>
        </h1>
    </header>

    
    <p><img style="float:left; margin-right: 20px;;" src="http://enzolutions.com/assets/img/phpbrew.png"/> If you are a PHP developer I'm sure you have been in a situation where you have to maintain several projects and is possible some of them require different version of PHP.</p>

<p>To resolve this situation described above nowadays the common recommendation is install a virtual machine like <a href="https://www.vagrantup.com/" target="_blank">Vagrant</a> or <a href="https://www.docker.com/" target="_blank">Docker</a> and off course works but if you are not a big fan of <em>Virtual Machines</em> like me and specially to only change the PHP version I have good news you can resolve your problems using the project <a href="http://phpbrew.github.io/phpbrew/" target="_blank">Phpbrew</a>.</p>

<p>Let me show you how to install and use.</p>

<h1>Install Phpbrew.</h1>

<h2>Dependencies.</h2>

<p>If you already have an environment to dev in PHP is probable you can skip this section.</p>

<p>The following utils are required.</p>

<p>+automake
+autoconf
+curl
+pcre
+re2c
+mhash
+libtool
+icu4c
+gettext
+jpeg
+libxml2
+mcrypt
+gmp
+libevent</p>

<p>If you are in Mac OS X and you use <a href="http://brew.sh/" target="_blank">brew</a> you run the following command.</p>

<pre><code>$ brew install automake autoconf curl pcre re2c mhash libtool icu4c gettext jpeg libxml2 mcrypt gmp libevent
$ brew link icu4c
</code></pre>

<h2>Download, Install and Initialize.</h2>

<p>To install you just need to execute the following commands</p>

<pre><code>curl -L -O https://github.com/phpbrew/phpbrew/raw/master/phpbrew
chmod +x phpbrew
sudo mv phpbrew /usr/bin/phpbrew
</code></pre>

<p>Now you must initialize your system executing the following command.</p>

<pre><code>$ phpbrew init
</code></pre>

<p>Then add these lines to your <em>.bashrc</em>, <em>.bash_profile</em> or <em>.zshrc</em> file</p>

<pre><code>export PHPBREW_SET_PROMPT=1
source ~/.phpbrew/bashrc
</code></pre>

<h1>Phpbrew commands</h1>

<h2>List PHP versions available to be installed</h2>

<pre><code>$ phpbrew known
5.6:  5.6.1, 5.6.0 ...
5.5:  5.5.17, 5.5.16, 5.5.15, 5.5.14, 5.5.13, 5.5.12, 5.5.11, 5.5.10 ...
5.4:  5.4.33, 5.4.32, 5.4.31, 5.4.30, 5.4.29, 5.4.28, 5.4.27, 5.4.26 ...
5.3:  5.3.29, 5.3.28, 5.3.27, 5.3.26, 5.3.25, 5.3.24, 5.3.23, 5.3.22 ...
</code></pre>

<h2>Install a PHP specific version of PHP</h2>

<pre><code>phpbrew install 5.5.10
</code></pre>

<p>You need wait until Phpbrew configure your system.</p>

<h2>Install a PHP with specific libraries or virtual variant.</h2>

<pre><code>$ sudo phpbrew install 5.5.10 +mysql +pdo +ctype +mhash +hash +iconv +json +iconv +gd +apxs2=/usr/sbin/apxs -- --with-gd -- --enable-gd-natf -- --with-jpeg-dir -- --with-png-dir

$ sudo phpbrew install 5.5.10 +default +mysql +hash +iconv +gd +apxs2=/usr/sbin/apxs -- --with-gd -- --enable-gd-natf -- --with-jpeg-dir -- --with-png-dir
</code></pre>

<p>If you don't know where is located the directory for your apache <a href="http://httpd.apache.org/docs/2.2/programs/apxs.html">apxs</a> you can execute the following command.</p>

<p>The previous install works to use with <a href="http://drupal.org" target="_blank">Drupal</a> 8 and <a href="spress.yosymfony.com" target="_blank">Spress</a>.</p>

<pre><code>$ whereis apxs
/usr/sbin/apxs
</code></pre>

<h2>Get a list of available libraries or variants</h2>

<pre><code>$ phpbrew variants
Variants:
  all, apxs2, bcmath, bz2, calendar, cgi, cli, ctype, curl, dba, debug, dom,
  embed, exif, fileinfo, filter, fpm, ftp, gcov, gd, gettext, hash, iconv,
  icu, imap, inifile, inline, intl, ipc, ipv6, json, kerberos, libgcc,
  maintainer, mbregex, mbstring, mcrypt, mhash, mysql, opcache, openssl,
  pcntl, pcre, pdo, pgsql, phar, phpdbg, posix, readline, session, soap,
  sockets, sqlite, static, tidy, tokenizer, wddx, xml, xml_all, xmlrpc,
  zip, zlib


Virtual variants:
  dbs: sqlite, mysql, pgsql, pdo
  mb: mbstring, mbregex
  neutral:
  default: bcmath, bz2, calendar, cli, ctype, dom, fileinfo, filter, ipc,
  json, mbregex, mbstring, mhash, mcrypt, pcntl, pcre, pdo, phar, posix,
  readline, sockets, tokenizer, xml, curl, zip


Using variants to build PHP:

  phpbrew install php-5.3.10 +default
  phpbrew install php-5.3.10 +mysql +pdo
  phpbrew install php-5.3.10 +mysql +pdo +apxs2
  phpbrew install php-5.3.10 +mysql +pdo +apxs2=/usr/bin/apxs2
</code></pre>

<h2>List php version versions available in your system</h2>

<pre><code>$ phpbrew list
Installed versions:
* php-5.5.10
</code></pre>

<h2>Change php Version</h2>

<pre><code>$ phpbrew switch php-5.5.10
</code></pre>

<h2>Disable Phpbrew</h2>

<pre><code>$ phpbrew off
phpbrew is turned off.
</code></pre>

<p>After disable Phpbrew you can execute the following command to check the current status of system</p>

<pre><code>$ phpbrew list
Installed versions:
* (system)
  php-5.5.10
</code></pre>

<p>As you can see the PHP version available if the normal PHP version your system have, off course you enable again other version using the <em>switch</em> command explained above.</p>

<h1>Enable PHPbrew version in Apache.</h1>

<p>After switch a version you must to inform to apache about the new version of PHP apache editing the apache config file <em>/etc/apache2/httpd.conf</em> or <em>/private/etc/apache2/httpd.conf</em> as you can see in the follow snippet.</p>

<pre><code>#LoadModule php5_module libexec/apache2/libphp5.so #Disabled
LoadModule hfs_apple_module libexec/apache2/mod_hfs_apple.so
LoadModule php5_module libexec/apache2/libphp5.5.10.so
</code></pre>

<p>As you can imagine a restart of Apache Server is required.</p>

<h2>Update Phpbrew</h2>

<pre><code>$ phpbrew self-update
</code></pre>

<h1>Modify your PHP info.</h1>

<p>Is so probable after enable a new version of PHP you lost your previous setup and you need to apply that tweaks and tricks in your new PHP.ini to determine where are located you just need execute the next command.</p>

<pre><code>$ phpbrew info | grep php.ini
Loaded Configuration File =&gt; ~/.phpbrew/php/php-5.5.10/etc/php.ini
</code></pre>

<p>Remove the grep portion to get the whole information.</p>


    <footer>
        <p>
            Posted by enzo - Eduardo Garcia on <time pubdate="pubdate">2014-10-17</time>
        </p>

                <ul class="list-unstyled">
                            <li>
                    <i class="fa fa-tags"></i>
                    PHP, Apache
                </li>
                                        <li>
                    <i class="fa fa-folder"></i>
                    articles
                </li>
                    </ul>
            </footer>
    
                        <section>
                <h3>Comments</h3>
                <div id="disqus_thread"></div>
                <noscript>
                    Please enable JavaScript to view the
                    <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a>
                </noscript>
                <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
            </section>
            </article>
            </div>
        </div>

        <footer id="footer">
            <div class="container">
                <div class="row">
                    <div class="col-md-6">
                        <ul class="list-inline">
        <li><a href="https://github.com/yosymfony/Spress-theme-spresso">
        Go to Spresso theme web</a>
    </li>
    </ul>
                    </div>
                    <div class="col-md-6 text-right">
                        <ul class="list-inline">
        <li>
        <a target="_blank" href="https://twitter.com/enzolutions">
            <i class="fa fa-twitter fa-2x"></i>
        </a>
    </li>
    
        <li>
        <a target="_blank" href="https://www.facebook.com/enzolutions">
            <i class="fa fa-facebook-square fa-2x"></i>
        </a>
    </li>
    
        <li>
        <a target="_blank" href="cr.linkedin.com/in/edugarcia/">
            <i class="fa fa-linkedin-square fa-2x"></i>
        </a>
    </li>
    
    
        <li>
        <a target="_blank" href="https://github.com/enzolutions">
            <i class="fa fa-github fa-2x"></i>
        </a>
    </li>
    
    
    
        <li>
        <a target="_blank" href="mailto:enzo@enzolutions.com">
            <i class="fa fa-paper-plane fa-2x"></i>
        </a>
    </li>
    
        <li>
        <a target="_blank" href="http://enzolutions.com/rss.xml">
            <i class="fa fa-rss fa-2x"></i>
        </a>
    </li>
    </ul>
                    </div>
                </div>
                <p class="text-center">
                    <a href="https://github.com/yosymfony/Spress-theme-spresso" title="Spresso theme">
                        <img src="http://enzolutions.com/assets/img/spresso-logo.png"/>
                    </a>
                </p>
                <p class="text-center">
                    &copy; 2014 enzo - Eduardo Garcia.
                    Powered by <a href="https://github.com/yosymfony/Spress">Spress</a>.
                </p>
            </div>
            <script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>
            <script src="/assets/js/bootstrap.min.js"></script>

            <script src="http://enzolutions.com/assets/js/github-repositories.js" type="text/javascript"></script>
            <script type="text/javascript">
              jQuery( document ).ready(function() {
                  jQuery("#my-github-projects").loadRepositories("enzolutions");
              });
            </script>

                        <script src="http://yandex.st/highlightjs/8.0/highlight.min.js"></script>
            <script>hljs.initHighlightingOnLoad();</script>
            
                        <script type="text/javascript">
            var disqus_shortname = 'enzolutions';

            (function() {
                var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
                dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
                (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
            })();
        </script>
            </footer>
    
      <!-- Google Analytics Tracker -->
      <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

        ga('create', 'UA-17944133-1', 'enzolutions.com');
        ga('send', 'pageview');
      </script>
      <!-- End of Google Analytics Tracker -->
 </body> 
</html>
