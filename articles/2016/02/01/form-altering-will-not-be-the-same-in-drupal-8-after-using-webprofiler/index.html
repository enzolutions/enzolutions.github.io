<!DOCTYPE HTML>
<!--[if lt IE 7]><html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en"> <![endif]-->
<!--[if (IE 7)&!(IEMobile)]><html class="no-js lt-ie9 lt-ie8" lang="en"><![endif]-->
<!--[if (IE 8)&!(IEMobile)]><html class="no-js lt-ie9" lang="en"><![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"><!--<![endif]-->
  <head>
    <title>Form altering will not be the same in Drupal 8 after using Webprofiler</title>
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<meta name="generator" content="Spress" />
<meta name="description" content="Enzo's blog" />
<meta name="keywords" content="" />


<!-- Twitter Cards -->
<meta name="twitter:title" content="Welcome to [enzo]lutions">
<meta name="twitter:description" content="Enzo's blog">
<meta name="twitter:site" content="@enzolutions">
<meta name="twitter:creator" content="@enzolutions">

<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="http://enzolutions.com/assets/images/blog_header_baby_turtle.png">

<!-- Open Graph -->
<meta property="og:locale" content="en_US">
<meta property="og:type" content="article">
<meta property="og:title" content="Welcome to [enzo]lutions">
<meta property="og:description" content="Enzo's blog">
<meta property="og:url" content="http://enzolutions.com">
<meta property="og:site_name" content="Welcome to [enzo]lutions">

<link rel="canonical" href="http://enzolutions.com">
<link href="http://enzolutions.com/rss.xml" type="application/atom+xml" rel="alternate" title="Welcome to [enzo]lutions">
<link rel="author" href="enzolutions">

<!-- http://t.co/dKP3o1e -->
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- For all browsers -->
<link rel="stylesheet" href="http://enzolutions.com/assets/css/main.css">

<meta http-equiv="cleartype" content="on">

<!-- HTML5 Shiv and Media Query Support -->
<!--[if lt IE 9]>
  <script src="http://enzolutions.com/assets/js/vendor/html5shiv.min.js"></script>
  <script src="http://enzolutions.com/assets/js/vendor/respond.min.js"></script>
<![endif]-->

<!-- Modernizr -->
<script src="http://enzolutions.com/assets/js/vendor/modernizr-2.7.1.custom.min.js"></script>

<link href='//fonts.googleapis.com/css?family=PT+Sans+Narrow:400,700%7CPT+Serif:400,700,400italic' rel='stylesheet' type='text/css'>

<!-- Icons -->
<!-- 16x16 -->
<link rel="shortcut icon" href="http://enzolutions.com/favicon.ico">
<!-- 32x32 -->
<link rel="shortcut icon" href="http://enzolutions.com/favicon.png">
<!-- 57x57 (precomposed) for iPhone 3GS, pre-2011 iPod Touch and older Android devices -->
<link rel="apple-touch-icon-precomposed" href="http://enzolutions.com/assets/images/apple-touch-icon-precomposed.png">
<!-- 72x72 (precomposed) for 1st generation iPad, iPad 2 and iPad mini -->
<link rel="apple-touch-icon-precomposed" sizes="72x72" href="http://enzolutions.com/assets/images/apple-touch-icon-72x72-precomposed.png">
<!-- 114x114 (precomposed) for iPhone 4, 4S, 5 and post-2011 iPod Touch -->
<link rel="apple-touch-icon-precomposed" sizes="114x114" href="http://enzolutions.com/assets/images/apple-touch-icon-114x114-precomposed.png">
<!-- 144x144 (precomposed) for iPad 3rd and 4th generation -->
<link rel="apple-touch-icon-precomposed" sizes="144x144" href="http://enzolutions.com/assets/images/apple-touch-icon-144x144-precomposed.png">

<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.4/styles/default.min.css">
<link rel="stylesheet" href="http://enzolutions.com/assets/css/highlight-theme.css">
  </head>

  <body class="home">
    <!--[if lt IE 9]><div class="browser-upgrade alert alert-info">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</div><![endif]-->

    <div class="navigation-wrapper">
  <div class="site-name">
    <a href="http://enzolutions.com">[enzo]lutions</a>
  </div><!-- /.site-name -->
  <div class="top-navigation">
          <ul class="inline">
                    <li>
            <a href="http://enzolutions.com/"  >
              Home</a>
          </li>
                    <li>
            <a href="http://enzolutions.com/company"  >
              Company</a>
          </li>
                    <li>
            <a href="http://enzolutions.com/projects"  >
              Projects</a>
          </li>
                    <li>
            <a href="http://enzolutions.com/talks"  >
              Talks</a>
          </li>
                </ul>
      </div><!-- /.top-navigation -->
</div><!-- /.navigation-wrapper -->

          <div class="image-wrap">
  <img src="http://enzolutions.com/assets/images/blog_header_baby_turtle.png" alt="feature image">
  <span class="image-credit">Photo Credit: <a target="_blank" href="https://twitter.com/yersika">Yersika Ferreira</a></span>
</div><!-- /.image-wrap -->
    
  <div id="main" role="main">
    <div class="article-author-side">
      <img src="http://enzolutions.com/assets/images/enzo.png" class="bio-photo" alt="Eduardo Garcia bio photo">

<h3>enzo</h3>
<h3>Eduardo Garcia</h3>
<p>Knowmad by definition</p>

<p> <a href="https://en.wikipedia.org/wiki/Australia" target="_blank"><img class="alignleft" src="http://enzolutions.com/assets/img/flags/au.png" /></a> Location: Australia</p>

<a href="http://twitter.com/enzolutions" class="author-social" target="_blank"><i class="fa fa-fw fa-twitter-square"></i> Twitter</a>

<a href="http://facebook.com/enzolutions" class="author-social" target="_blank"><i class="fa fa-fw fa-facebook-square"></i> Facebook</a>

<a href="http://wpa.qq.com/msgrd?v=3&uin=2869823852&site=qq&menu=yes" class="author-social" target="_blank"><i class="fa fa-fw fa-qq"></i> &nbsp;QQ交谈</a>

<a href="http://plus.google.com/105943717171843527124" class="author-social" target="_blank"><i class="fa fa-fw fa-google-plus-square"></i> Google+</a>


<a href="http://github.com/enzolutions" class="author-social" target="_blank"><i class="fa fa-fw fa-github"></i> Github</a>

<a href="http://linkedin.com/in/edugarcia" class="author-social" target="_blank"><i class="fa fa-fw fa-linkedin"></i> LinkedIn</a>

<a href="http://enzolutions.com/rss.xml" class="author-social" target="_blank"><i class="fa fa-fw fa-rss"></i> Feed</a>
    </div>

  <article class="post">
  <div class="headline-wrap">
          <h1><a href="http://enzolutions.com/articles/2016/02/01/form-altering-will-not-be-the-same-in-drupal-8-after-using-webprofiler" rel="bookmark" title="Form altering will not be the same in Drupal 8 after using Webprofiler">Form altering will not be the same in Drupal 8 after using Webprofiler</a></h1>
      </div><!--/ .headline-wrap -->
  <div class="article-wrap">
    <div class="social-share">
  <ul class="inline-list">
    <li class="facebook">
      <a href="https://www.facebook.com/sharer/sharer.php?u=http://enzolutions.com/articles/2016/02/01/form-altering-will-not-be-the-same-in-drupal-8-after-using-webprofiler" title="Share on Facebook"><span class="count"><i class="fa fa-facebook-square"></i> Share</span></a>
    </li>
    <li class="twitter">
      <a href="https://twitter.com/intent/tweet?text=http://enzolutions.com/articles/2016/02/01/form-altering-will-not-be-the-same-in-drupal-8-after-using-webprofiler" title="Share on Twitter"><span class="count"><i class="fa fa-twitter-square"></i> Tweet</span></a>
    </li>
    <li class="googleplus">
      <a href="https://plus.google.com/share?url=http://enzolutions.com/articles/2016/02/01/form-altering-will-not-be-the-same-in-drupal-8-after-using-webprofiler" title="Share on Google Plus"><span class="count"><i class="fa fa-google-plus-square"></i> +1</span></a>
    </li>
  </ul>
</div>

    <p>One of the most common tasks as a Drupal developer is alter a form created by Drupal core of by a contrib module to 
enable us to include our business logic or  just remove something annoying for our clients.</p>

<p>In Drupal 8 we still have to the hook <a href="https://api.drupal.org/api/drupal/core%21lib%21Drupal%21Core%21Form%21form.api.php/function/hook_form_alter/8">hook_form_alter</a>, I know, I know the whole idea of Drupal 8 is to remove hooks, but we still have some of them around.</p>

<p>But, this article is not about to discuss that hook must exist or not, Is there and we have to use until is replaced by something else.</p>

<p>Doing a form alter require a one significant and vital information the <strong>FORM_ID</strong>. Usually, we can get this information implementing a generic form alter and print all form_ids loaded and choose the desired one, or, check in form source code to verify the id in method <strong>getFormId</strong> as you can see in the following method</p>

<pre><code>  /**
   * {@inheritdoc}
   */
  public function getFormId() {
    return 'search_block_form';
  }

</code></pre>

<p>That doesn't look like an old fashion way? indeed, it's the old fashion way. Drupal 8 allow us to have excellent third party tools, and I want to talk about <a href="https://www.drupal.org/project/devel">Webprofiler</a>, which in combination with the <a href="http://drupalcosole.com">Drupal Console</a> project, provide us a clever way to determine and generate our form alter, fast and efficient.</p>

<p><a href="https://www.drupal.org/u/lussoluca">Lussoluca</a> created the webprofiler module, and is an effective implementation of <a href="http://symfony.com/doc/current/cookbook/profiler/index.html">Symfony profiler</a>, using this component to write and extension to provide the Drupal things that Symfony profiler ignore. Webprofiler start as an independent project at <a href="https://www.drupal.org/project/webprofiler">https://www.drupal.org/project/webprofiler</a>, but the last December was merged as a submodule of Devel module; honestly I don't understand because there is not any technical dependency, IMHO webprofiler must have an independent project.</p>

<h1>Generate a standard form alter.</h1>

<p>Anyhow, let me show you how to generate a form alter using the <strong>Drupal Console</strong> without <strong>Webprofiler</strong>.</p>

<p>Using the command <strong>generate:form:alter</strong> we could generate an implementation of hook hoo_form_alter in any desired module, let show you who to execute this command avoiding interactive mode</p>

<pre><code>$ drupal generate:form:alter  --module="testing" --inputs="name:name type:textfield label:Name options: description: maxlength:64 size:64 default_value: weight:0" --no-interaction
</code></pre>

<p>As result, we will get the following code:</p>

<pre><code>use Drupal\Core\Form\FormStateInterface;

/**
 * Implements hook_form_alter() on behalf of testing.module.
 */
function testing_form_alter(&amp;$form, FormStateInterface $form_state, $form_id) {
    // Change form id here
    if ($form_id == 'form_test_alter_form') {
        drupal_set_message('form_test_form_alter() executed.');

        $form['name'] = array(
          '#type' =&gt; 'textfield',
          '#title' =&gt; t('Name'),
          '#description' =&gt; t(''),
          '#maxlength' =&gt; 64,
          '#size' =&gt; 64,
          '#weight' =&gt; '0',
        );

    }
}
</code></pre>

<p>Checking out, the code above we can see that is just an example, and you need to change the proper form id, but, at least, we have a starting point and example about how to add new form elements.</p>

<h1>Generate a form alter using webprofiler.</h1>

<h2>Installing and enabling Webprofiler.</h2>

<p>Firstly, you need to get the latest version of devel module, because as I said before, webprofiler is a submodule of devel. Let's do that using <strong>Drupal Console</strong>.</p>

<pre><code>$ drupal module:download devel --latest
</code></pre>

<p>Secondly, just enable the webprofiler module as you can see in the following snippet.</p>

<pre><code>$ drupal module:install webprofiler
</code></pre>

<h2>Generating a form alter using Webprofiler</h2>

<p>After enabling the module we just need to navigate to your website visiting the pages with forms we can to alter, when Webprofiler is installed you will get a toolbar at the bottom as you can see in the following image.</p>

<p><img style="margin-right: 20px;" src="http://enzolutions.com/assets/img/drupal_webprofiler.png"/></p>

<p>Now, If we want to include an extra field in theme configuration, we just need to visit page http://example.comv/admin/appearance/settings/bartik tp store form information in Webprofiler inventory.</p>

<p>Using the command <strong>generate:form:alter</strong> but now in interactive mode, the command will detect that webprofiler module is installed, and we will provide us a list of form id available and give us the option to remove some fields from form, as you can check out in the following image.</p>

<pre><code>drupal generate:form:alter --module=testing
</code></pre>

<p><img style="margin-right: 20px;" src="http://enzolutions.com/assets/img/console_generate_webprofiler.png"/></p>

<p>The interactive mode provides a list of form ids available; you can use the arrows on your keyboard to navigate through options available.</p>

<p>The code generated now will be more precise and as you can see using the Webprofiler inventory we could decide to remove some form elements and still include new ones. The code generated will be similar to the following snippet.</p>

<pre><code>use Drupal\Core\Form\FormStateInterface;

/**
 * Implements hook_form_FORM_ID_alter() on behalf of testing.module.
 * @see \Drupal\system\Form\ThemeSettingsForm method buildForm at core/modules/system/src/Form/ThemeSettingsForm.php
 */
function testing_form_system_theme_settings_alter(&amp;$form, FormStateInterface $form_state) {
    drupal_set_message('testing_form_system_theme_settings_alter() executed.');

    $form['color']['#access'] = FALSE;

}
</code></pre>

<p>As you can see the sky is the limit we can create commands to do a lot of magic using Webprofiler inventory.</p>

<p>I hope do you found this article useful.</p>

    <hr />
    <footer role="contentinfo">
              <ul class="list-unstyled">
                            <li>
                    <i class="fa fa-tags"></i>
                                        <a href="http://enzolutions.com/tags/drupal">drupal</a>,                                        <a href="http://enzolutions.com/tags/drupal-8">drupal 8</a>,                                        <a href="http://enzolutions.com/tags/form">form</a>,                                        <a href="http://enzolutions.com/tags/php">php</a>,                                        <a href="http://enzolutions.com/tags/webprofiler">webprofiler</a>                                    </li>
                                        <li>
                    <i class="fa fa-folder"></i>
                                        <a href="http://enzolutions.com/categories/articles">articles</a>                                    </li>
                    </ul>
          </footer>
  </div><!-- /.article-wrap -->
    <section>
    <h3>Comments</h3>
    <div id="disqus_thread"></div>
    <noscript>
      Please enable JavaScript to view the
      <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a>
    </noscript>
    <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
  </section>

      <script type="text/javascript">
        var disqus_shortname = 'enzolutions';

        (function() {
            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script>
  </article>

</div><!-- /#main -->

<div class="footer-wrap">
  <footer>
    <span>&copy; 2014 - 2017 Eduardo Garcia.</span><br/>
<span>Design by <a target="_blank" href="https://mademistakes.com/">Michael Rose</a></span><br/>
</span></li> Powered by <a target="_blank"href="http://spress.yosymfony.com">Spress </a> 2.2.0, using the <a target="_blank" href="https://github.com/enzolutions/spress-tinto-theme/">Tinto</a> theme.</span>
<br/>
  </footer>
</div><!-- /.footer-wrap -->

<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script>window.jQuery || document.write('<script src="http://enzolutions.com/assets/js/vendor/jquery-1.9.1.min.js"><\/script>')</script>
<script src="http://enzolutions.com/assets/js/scripts.min.js"></script>

<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.4/highlight.min.js"></script>
<script>hljs.initHighlightingOnLoad();</script>


      <!-- Google Analytics Tracker -->
      <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

        ga('create', 'UA-17944133-1', 'enzolutions.com');
        ga('send', 'pageview');
      </script>
      <!-- End of Google Analytics Tracker -->
 </body> 
</html>
