<!DOCTYPE HTML>
<!--[if lt IE 7]><html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en"> <![endif]-->
<!--[if (IE 7)&!(IEMobile)]><html class="no-js lt-ie9 lt-ie8" lang="en"><![endif]-->
<!--[if (IE 8)&!(IEMobile)]><html class="no-js lt-ie9" lang="en"><![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"><!--<![endif]-->
  <head>
    <title>How to merge YAML files</title>
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<meta name="generator" content="Spress" />
<meta name="description" content="Enzo's blog" />
<meta name="keywords" content="" />


<!-- Twitter Cards -->
<meta name="twitter:title" content="Welcome to [enzo]lutions">
<meta name="twitter:description" content="Enzo's blog">
<meta name="twitter:site" content="@enzolutions">
<meta name="twitter:creator" content="@enzolutions">

<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="http://localhost:4000/assets/images/blog_header_baby_turtle.png">

<!-- Open Graph -->
<meta property="og:locale" content="en_US">
<meta property="og:type" content="article">
<meta property="og:title" content="Welcome to [enzo]lutions">
<meta property="og:description" content="Enzo's blog">
<meta property="og:url" content="http://localhost:4000">
<meta property="og:site_name" content="Welcome to [enzo]lutions">

<link rel="canonical" href="http://localhost:4000">
<link href="http://localhost:4000/rss.xml" type="application/atom+xml" rel="alternate" title="Welcome to [enzo]lutions">
<link rel="author" href="enzolutions">

<!-- http://t.co/dKP3o1e -->
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- For all browsers -->
<link rel="stylesheet" href="http://localhost:4000/assets/css/main.css">

<meta http-equiv="cleartype" content="on">

<!-- HTML5 Shiv and Media Query Support -->
<!--[if lt IE 9]>
  <script src="http://localhost:4000/assets/js/vendor/html5shiv.min.js"></script>
  <script src="http://localhost:4000/assets/js/vendor/respond.min.js"></script>
<![endif]-->

<!-- Modernizr -->
<script src="http://localhost:4000/assets/js/vendor/modernizr-2.7.1.custom.min.js"></script>

<link href='//fonts.googleapis.com/css?family=PT+Sans+Narrow:400,700%7CPT+Serif:400,700,400italic' rel='stylesheet' type='text/css'>

<!-- Icons -->
<!-- 16x16 -->
<link rel="shortcut icon" href="http://localhost:4000/favicon.ico">
<!-- 32x32 -->
<link rel="shortcut icon" href="http://localhost:4000/favicon.png">
<!-- 57x57 (precomposed) for iPhone 3GS, pre-2011 iPod Touch and older Android devices -->
<link rel="apple-touch-icon-precomposed" href="http://localhost:4000/assets/images/apple-touch-icon-precomposed.png">
<!-- 72x72 (precomposed) for 1st generation iPad, iPad 2 and iPad mini -->
<link rel="apple-touch-icon-precomposed" sizes="72x72" href="http://localhost:4000/assets/images/apple-touch-icon-72x72-precomposed.png">
<!-- 114x114 (precomposed) for iPhone 4, 4S, 5 and post-2011 iPod Touch -->
<link rel="apple-touch-icon-precomposed" sizes="114x114" href="http://localhost:4000/assets/images/apple-touch-icon-114x114-precomposed.png">
<!-- 144x144 (precomposed) for iPad 3rd and 4th generation -->
<link rel="apple-touch-icon-precomposed" sizes="144x144" href="http://localhost:4000/assets/images/apple-touch-icon-144x144-precomposed.png">

<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.4/styles/default.min.css">
<link rel="stylesheet" href="http://localhost:4000/assets/css/highlight-theme.css">
  </head>

  <body class="home">
    <!--[if lt IE 9]><div class="browser-upgrade alert alert-info">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</div><![endif]-->

    <div class="navigation-wrapper">
  <div class="site-name">
    <a href="http://localhost:4000">[enzo]lutions</a>
  </div><!-- /.site-name -->
  <div class="top-navigation">
          <ul class="inline">
                    <li>
            <a href="http://localhost:4000/"  >
              Home</a>
          </li>
                    <li>
            <a href="http://localhost:4000/company"  >
              Company</a>
          </li>
                    <li>
            <a href="http://localhost:4000/projects"  >
              Projects</a>
          </li>
                    <li>
            <a href="http://localhost:4000/talks"  >
              Talks</a>
          </li>
                </ul>
      </div><!-- /.top-navigation -->
</div><!-- /.navigation-wrapper -->

          <div class="image-wrap">
  <img src="http://localhost:4000/assets/images/blog_header_baby_turtle.png" alt="feature image">
  <span class="image-credit">Photo Credit: <a target="_blank" href="https://twitter.com/yersika">Yersika Ferreira</a></span>
</div><!-- /.image-wrap -->
    
  <div id="main" role="main">
    <div class="article-author-side">
      <img src="http://localhost:4000/assets/images/enzo.png" class="bio-photo" alt="Eduardo Garcia bio photo">

<h3>enzo</h3>
<h3>Eduardo Garcia</h3>
<p>Knowmad by definition</p>

<p> <a href="https://en.wikipedia.org/wiki/Australia" target="_blank"><img class="alignleft" src="http://localhost:4000/assets/img/flags/au.png" /></a> Location: Australia</p>

<a href="http://twitter.com/enzolutions" class="author-social" target="_blank"><i class="fa fa-fw fa-twitter-square"></i> Twitter</a>

<a href="http://facebook.com/enzolutions" class="author-social" target="_blank"><i class="fa fa-fw fa-facebook-square"></i> Facebook</a>

<a href="http://wpa.qq.com/msgrd?v=3&uin=2869823852&site=qq&menu=yes" class="author-social" target="_blank"><i class="fa fa-fw fa-qq"></i> &nbsp;QQ交谈</a>

<a href="http://plus.google.com/105943717171843527124" class="author-social" target="_blank"><i class="fa fa-fw fa-google-plus-square"></i> Google+</a>


<a href="http://github.com/enzolutions" class="author-social" target="_blank"><i class="fa fa-fw fa-github"></i> Github</a>

<a href="http://linkedin.com/in/edugarcia" class="author-social" target="_blank"><i class="fa fa-fw fa-linkedin"></i> LinkedIn</a>

<a href="http://localhost:4000/rss.xml" class="author-social" target="_blank"><i class="fa fa-fw fa-rss"></i> Feed</a>
    </div>

  <article class="post">
  <div class="headline-wrap">
          <h1><a href="http://localhost:4000/articles/2015/07/08/how-to-merge-yaml-files" rel="bookmark" title="How to merge YAML files">How to merge YAML files</a></h1>
      </div><!--/ .headline-wrap -->
  <div class="article-wrap">
    <div class="social-share">
  <ul class="inline-list">
    <li class="facebook">
      <a href="https://www.facebook.com/sharer/sharer.php?u=http://localhost:4000/articles/2015/07/08/how-to-merge-yaml-files" title="Share on Facebook"><span class="count"><i class="fa fa-facebook-square"></i> Share</span></a>
    </li>
    <li class="twitter">
      <a href="https://twitter.com/intent/tweet?text=http://localhost:4000/articles/2015/07/08/how-to-merge-yaml-files" title="Share on Twitter"><span class="count"><i class="fa fa-twitter-square"></i> Tweet</span></a>
    </li>
    <li class="googleplus">
      <a href="https://plus.google.com/share?url=http://localhost:4000/articles/2015/07/08/how-to-merge-yaml-files" title="Share on Google Plus"><span class="count"><i class="fa fa-google-plus-square"></i> +1</span></a>
    </li>
  </ul>
</div>

    <p>By definition, a <a href="http://yaml.org/">YAML</a> is a human-friendly data serialization standard for all programming languages.
But, in a less formal definition YAML is a great format for your configuration files, because, YAML files are as expressive
as XML files and as readable as INI files.</p>

<p>Currently, I am using YAML files for configuration in my <a href="http://drupal.org">Drupal</a>, <a href="http://silex.sensiolabs.org/">Silex</a>
and <a href="http://symfony.com/">Symfony</a> projects. Until now I could say is a good way to save information but I don't have a strong 
preference versus other formats, however, is easy to use, so no regrets.</p>

<p>However, a YAML file could represent anything, let me show you some examples.</p>

<p>The first one from <a href="http://drupalconsole.com">Drupal Console</a> 
project where YAML files are used to store the translations string as you can see for <a href="https://github.com/hechoendrupal/DrupalConsole/blob/master/config/translations/en/application.yml">English</a> and <a href="https://github.com/hechoendrupal/DrupalConsole/blob/master/config/translations/es/application.yml">Spanish</a>. Check
 an extract of translation.</p>

<pre><code>console:
    arguments:
        drupal: 'Ruta a la raíz de Drupal'
        shell: 'Iniciar el shell.'
        env: 'Nombre del ambiente.'
        no-debug: 'Desactivar el modo de depuración.'
        learning: 'Generar código con explicaciones.'
        generate-chain: 'Imprimir opciones y argumentos como YAML para ser usado el comando chain'
        generate-inline: 'Imprimir opciones y argumentos de ejecución como llamada inline para ser usados en el futuro'
        root: 'Define la raíz de Drupal que se utilizará en la ejecución de los comandos'
        uri: 'URI del sitio en Drupal que se usará (para ambientes en multi-site o cuando esta usando un puerto alternativo)'
    messages:
        completed: '¡Ya puede empezar a usar el código generado!'
        chain:
            generated: 'A continuación puedes observar la representación en YAML del último comando ejecutado, puede copiarlo en ~/.console/chain/sample.yml para ejecutarlo en una secuencia de comandos'
        inline:
            generated: 'A continuación puedes encontrar la representación inline de este comando para volver a ejecutarlo más tarde'
        generated: '¡Ya puedes empezar a usar el código generado!'
        files:
            generated: '¡Ya puedes comenzar a usar el código generado!'
</code></pre>

<p>The second one from <a href="http://drupal.org">Drupal</a> where is used by <a href="https://www.drupal.org/drupal-8.0/features#configuration">Configuration Management</a> to export and import configuration across environments. 
Let me show you an example of a basic content type.</p>

<pre><code>uuid: f5c966ac-b9a8-4ab8-b335-5380c6bb8524
name: drupal8.dev
mail: admin@example.com
slogan: ''
page:
  403: ''
  404: ''
  front: /node
admin_compact_mode: false
weight_select_max: 100
langcode: en
default_langcode: en
</code></pre>

<p>Now with all these YAML files surrounded our applications, a new kind of common and challenging tasks appears.</p>

<p>In the case of
Drupal Console project, because the project is in active development; new features and fixes are included constantly in
the code base and their translation are allocated in several YAML files, those files are always quite ahead than their translations, and
try to update without loose current translations is a slow and manual process.</p>

<p>As programmers, we hate manual tasks and in this particular case we always said "If only there be a command or util to do this silly task",
well I did to myself that question and my answer was, include in <strong>Drupal Console</strong> release <a href="https://github.com/hechoendrupal/DrupalConsole/releases/tag/0.7.15">0.7.15</a> a new command
 <strong>yaml:merge</strong></p>

<p>To execute this command, you need at least two YAML files to merge, as you can see in the following batch sentence.</p>

<pre><code>$ drupal yaml:merge new.yml console.en.yml console.es.yml
</code></pre>

<p>What will happen after executing this command is a new file named new.yml containing all <strong>console.en.yml</strong> entries and entries translated in <strong>console.es.yml</strong>, in this way new translations will be maintained and new entries will be included in the new file.</p>

<p>Is possible to set the same file as last parameters and destination to have an immediate overwrite, but a new file is recommended to check the results.</p>

<p>If it's required you can include as many YAML files are required to merge, but, take into account that the YAML files in the right side of command will always overwrite their entries.</p>

<p>The Drupal Console has this kind of problems because there are different sources of contributions and different amount of contributions for language, but 
in the future I can image in Drupal we could have similar kind of requirements when the same piece of configuration is updated in different environment and 
we have the need of merge in one solution.</p>

<p>If you are not a user of <strong>Drupal Console</strong> but you need this command, don't worry if you don't have a Drupal environment, 
Drupal Console is a <a href="http://php.net/manual/en/intro.phar.php">Phar</a> application completely independent of Drupal. To use a command like <strong>yaml:merge</strong>, just install it,
do your job and remove it, if it's not required anymore.</p>

<p>Other commands in Drupal Console related with YAML files are:</p>

<pre><code>yaml:update:value
yaml:update:key
yaml:split
yaml:diff
</code></pre>

<p>I hope you found this article useful.</p>

    <hr />
    <footer role="contentinfo">
              <ul class="list-unstyled">
                            <li>
                    <i class="fa fa-tags"></i>
                                        <a href="http://localhost:4000/tags/console">console</a>,                                        <a href="http://localhost:4000/tags/silex">silex</a>,                                        <a href="http://localhost:4000/tags/symfony">symfony</a>,                                        <a href="http://localhost:4000/tags/yaml">yaml</a>                                    </li>
                                        <li>
                    <i class="fa fa-folder"></i>
                                        <a href="http://localhost:4000/categories/articles">articles</a>                                    </li>
                    </ul>
          </footer>
  </div><!-- /.article-wrap -->
    <section>
    <h3>Comments</h3>
    <div id="disqus_thread"></div>
    <noscript>
      Please enable JavaScript to view the
      <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a>
    </noscript>
    <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
  </section>

      <script type="text/javascript">
        var disqus_shortname = 'enzolutions';

        (function() {
            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script>
  </article>

</div><!-- /#main -->

<div class="footer-wrap">
  <footer>
    <span>&copy; 2014 - 2017 Eduardo Garcia.</span><br/>
<span>Design by <a target="_blank" href="https://mademistakes.com/">Michael Rose</a></span><br/>
</span></li> Powered by <a target="_blank"href="http://spress.yosymfony.com">Spress </a> 2.2.0, using the <a target="_blank" href="https://github.com/enzolutions/spress-tinto-theme/">Tinto</a> theme.</span>
<br/>
  </footer>
</div><!-- /.footer-wrap -->

<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script>window.jQuery || document.write('<script src="http://localhost:4000/assets/js/vendor/jquery-1.9.1.min.js"><\/script>')</script>
<script src="http://localhost:4000/assets/js/scripts.min.js"></script>

<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.4/highlight.min.js"></script>
<script>hljs.initHighlightingOnLoad();</script>


      <!-- Google Analytics Tracker -->
      <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

        ga('create', 'UA-17944133-1', 'enzolutions.com');
        ga('send', 'pageview');
      </script>
      <!-- End of Google Analytics Tracker -->
 </body> 
</html>
