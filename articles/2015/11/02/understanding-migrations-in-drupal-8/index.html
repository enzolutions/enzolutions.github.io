<!DOCTYPE HTML>
<!--[if lt IE 7]><html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en"> <![endif]-->
<!--[if (IE 7)&!(IEMobile)]><html class="no-js lt-ie9 lt-ie8" lang="en"><![endif]-->
<!--[if (IE 8)&!(IEMobile)]><html class="no-js lt-ie9" lang="en"><![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"><!--<![endif]-->
  <head>
    <title>Understanding migrations in Drupal 8</title>
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<meta name="generator" content="Spress" />
<meta name="description" content="Enzo's blog" />
<meta name="keywords" content="" />


<!-- Twitter Cards -->
<meta name="twitter:title" content="Welcome to [enzo]lutions">
<meta name="twitter:description" content="Enzo's blog">
<meta name="twitter:site" content="@enzolutions">
<meta name="twitter:creator" content="@enzolutions">

<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="http://enzolutions.com/assets/images/blog_header_baby_turtle.png">

<!-- Open Graph -->
<meta property="og:locale" content="en_US">
<meta property="og:type" content="article">
<meta property="og:title" content="Welcome to [enzo]lutions">
<meta property="og:description" content="Enzo's blog">
<meta property="og:url" content="http://enzolutions.com">
<meta property="og:site_name" content="Welcome to [enzo]lutions">

<link rel="canonical" href="http://enzolutions.com">
<link href="http://enzolutions.com/rss.xml" type="application/atom+xml" rel="alternate" title="Welcome to [enzo]lutions">
<link rel="author" href="enzolutions">

<!-- http://t.co/dKP3o1e -->
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- For all browsers -->
<link rel="stylesheet" href="http://enzolutions.com/assets/css/main.css">

<meta http-equiv="cleartype" content="on">

<!-- HTML5 Shiv and Media Query Support -->
<!--[if lt IE 9]>
  <script src="http://enzolutions.com/assets/js/vendor/html5shiv.min.js"></script>
  <script src="http://enzolutions.com/assets/js/vendor/respond.min.js"></script>
<![endif]-->

<!-- Modernizr -->
<script src="http://enzolutions.com/assets/js/vendor/modernizr-2.7.1.custom.min.js"></script>

<link href='//fonts.googleapis.com/css?family=PT+Sans+Narrow:400,700%7CPT+Serif:400,700,400italic' rel='stylesheet' type='text/css'>

<!-- Icons -->
<!-- 16x16 -->
<link rel="shortcut icon" href="http://enzolutions.com/favicon.ico">
<!-- 32x32 -->
<link rel="shortcut icon" href="http://enzolutions.com/favicon.png">
<!-- 57x57 (precomposed) for iPhone 3GS, pre-2011 iPod Touch and older Android devices -->
<link rel="apple-touch-icon-precomposed" href="http://enzolutions.com/assets/images/apple-touch-icon-precomposed.png">
<!-- 72x72 (precomposed) for 1st generation iPad, iPad 2 and iPad mini -->
<link rel="apple-touch-icon-precomposed" sizes="72x72" href="http://enzolutions.com/assets/images/apple-touch-icon-72x72-precomposed.png">
<!-- 114x114 (precomposed) for iPhone 4, 4S, 5 and post-2011 iPod Touch -->
<link rel="apple-touch-icon-precomposed" sizes="114x114" href="http://enzolutions.com/assets/images/apple-touch-icon-114x114-precomposed.png">
<!-- 144x144 (precomposed) for iPad 3rd and 4th generation -->
<link rel="apple-touch-icon-precomposed" sizes="144x144" href="http://enzolutions.com/assets/images/apple-touch-icon-144x144-precomposed.png">

<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.4/styles/default.min.css">
<link rel="stylesheet" href="http://enzolutions.com/assets/css/highlight-theme.css">
  </head>

  <body class="home">
    <!--[if lt IE 9]><div class="browser-upgrade alert alert-info">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</div><![endif]-->

    <div class="navigation-wrapper">
  <div class="site-name">
    <a href="http://enzolutions.com">[enzo]lutions</a>
  </div><!-- /.site-name -->
  <div class="top-navigation">
          <ul class="inline">
                    <li>
            <a href="http://enzolutions.com/"  >
              Home</a>
          </li>
                    <li>
            <a href="http://enzolutions.com/company"  >
              Company</a>
          </li>
                    <li>
            <a href="http://enzolutions.com/projects"  >
              Projects</a>
          </li>
                    <li>
            <a href="http://enzolutions.com/talks"  >
              Talks</a>
          </li>
                </ul>
      </div><!-- /.top-navigation -->
</div><!-- /.navigation-wrapper -->

          <div class="image-wrap">
  <img src="http://enzolutions.com/assets/images/blog_header_baby_turtle.png" alt="feature image">
  <span class="image-credit">Photo Credit: <a target="_blank" href="https://twitter.com/yersika">Yersika Ferreira</a></span>
</div><!-- /.image-wrap -->
    
  <div id="main" role="main">
    <div class="article-author-side">
      <img src="http://enzolutions.com/assets/images/enzo.png" class="bio-photo" alt="Eduardo Garcia bio photo">

<h3>enzo</h3>
<h3>Eduardo Garcia</h3>
<p>Knowmad by definition</p>

<p> <a href="https://en.wikipedia.org/wiki/Australia" target="_blank"><img class="alignleft" src="http://enzolutions.com/assets/img/flags/au.png" /></a> Location: Australia</p>

<a href="http://twitter.com/enzolutions" class="author-social" target="_blank"><i class="fa fa-fw fa-twitter-square"></i> Twitter</a>

<a href="http://facebook.com/enzolutions" class="author-social" target="_blank"><i class="fa fa-fw fa-facebook-square"></i> Facebook</a>

<a href="http://wpa.qq.com/msgrd?v=3&uin=2869823852&site=qq&menu=yes" class="author-social" target="_blank"><i class="fa fa-fw fa-qq"></i> &nbsp;QQ交谈</a>

<a href="http://plus.google.com/105943717171843527124" class="author-social" target="_blank"><i class="fa fa-fw fa-google-plus-square"></i> Google+</a>


<a href="http://github.com/enzolutions" class="author-social" target="_blank"><i class="fa fa-fw fa-github"></i> Github</a>

<a href="http://linkedin.com/in/edugarcia" class="author-social" target="_blank"><i class="fa fa-fw fa-linkedin"></i> LinkedIn</a>

<a href="http://enzolutions.com/rss.xml" class="author-social" target="_blank"><i class="fa fa-fw fa-rss"></i> Feed</a>
    </div>

  <article class="post">
  <div class="headline-wrap">
          <h1><a href="http://enzolutions.com/articles/2015/11/02/understanding-migrations-in-drupal-8" rel="bookmark" title="Understanding migrations in Drupal 8">Understanding migrations in Drupal 8</a></h1>
      </div><!--/ .headline-wrap -->
  <div class="article-wrap">
    <div class="social-share">
  <ul class="inline-list">
    <li class="facebook">
      <a href="https://www.facebook.com/sharer/sharer.php?u=http://enzolutions.com/articles/2015/11/02/understanding-migrations-in-drupal-8" title="Share on Facebook"><span class="count"><i class="fa fa-facebook-square"></i> Share</span></a>
    </li>
    <li class="twitter">
      <a href="https://twitter.com/intent/tweet?text=http://enzolutions.com/articles/2015/11/02/understanding-migrations-in-drupal-8" title="Share on Twitter"><span class="count"><i class="fa fa-twitter-square"></i> Tweet</span></a>
    </li>
    <li class="googleplus">
      <a href="https://plus.google.com/share?url=http://enzolutions.com/articles/2015/11/02/understanding-migrations-in-drupal-8" title="Share on Google Plus"><span class="count"><i class="fa fa-google-plus-square"></i> +1</span></a>
    </li>
  </ul>
</div>

    <p>As you know Drupal 8 was released at Nov 19 / 2015 (finally).</p>

<p>One of the most recurrent questions is <strong>"It's time to create new projects in Drupal 8"</strong>, but there is another difficult question. <strong>"How I can migrate my current Drupal 7/6/* to Drupal 8"</strong></p>

<p>To try to answer that question let me explain a little bit how Migration works in Drupal 8.</p>

<h1>Modules required</h1>

<p>Drupal 8 provide in their core modules the <strong>Migrate</strong> module, this module provide a mini framework to be user to migrate from <em>Any source</em> to Drupal 8. I said ANY because this module itself doesn't have any logic related to Drupal stuff.</p>

<p>The idea is if you plan to migrate from a specific source like Drupal, Wordpress, CQ5 etc you must write an integration to handle the transformation of content into Drupal 8 structure.</p>

<p>Fortunately for us at least we have a Drupal 8 core module related to Drupal named <strong>Migrate Drupal</strong>, this module contains some Migrate plugin to run the migration process between older Drupal versions to Drupal 8, but this module doesn't contain migration definitions since Drupal 8 beta 13</p>

<p>Therefore, the first step you need to do is install these modules, I will use the project <a href="http://drupalconsole.com">Drupal Console</a> for this tasks and I will continue using some commands available related with migration.</p>

<pre><code>$ drupal module:install migrate migrate_drupal
</code></pre>

<h1>Where I can find migrations</h1>

<p>After install modules Migration and Migrate Drupal, I guess you are waiting for something in UI to start to handle your migrations. Sadly there is nothing inside Drupal Core to provide a UI for migration, this responsibility relies on two contributed modules <a href="https://www.drupal.org/project/migrate_plus">Migrate Plus</a> and <a href="https://www.drupal.org/project/migrate_upgrade">Migrate Upgrade</a>.</p>

<p>Each module apply a different point of view about migrations, both IMHO looks like <em>Migrate Upgrade</em> it's in a more mature state. But, there is always a but, I don't like the idea that you are only available to see all migrations available when you are running the migration itself.</p>

<p>With Drupal just released it's probably that you will be in a stage where you don't really know what are you doing, so I decided to implement some migration command inside <strong>Drupal Console</strong> project with my own point of view.</p>

<h1>Loading migrations</h1>

<p>As I said before I prefer load migrations but without running a migration yet. For that purpose, I did a command <strong>migrate:setup</strong> as you can see in following CLI execution sample.</p>

<pre><code>$ drupal migrate:setup --db-type=mysql --db-host=127.0.0.1 --db-name=plato_tipico --db-user=root --db-pass=root --db-port=3306 --no-interaction
</code></pre>

<p>In the sample above I pass all parameters using inline mode, but if you omit an option, the command will start the interactive mode. Remember to remove the option *--no-interaction** to enable the interactive mode.</p>

<p>The command above will inspect your legacy DB and import all migrations available in Drupal 8 to be used with your legacy DB.</p>

<p>All migration entities created will remain in your system, even after complete a migration process.</p>

<h1>Get list of migrations</h1>

<p>In order to get a list of migrations available in your system, you must execute the following command</p>

<pre><code>$ drupal migrate:debug
</code></pre>

<p>As you can appreciate in the following image some migrations work in more that one Drupal legacy version</p>

<p><img src="http://enzolutions.com/assets/img/console_migrate_debug.png"/></p>

<h1>Execute a migration</h1>

<p>After reviewing your system in term of migrations available, we could execute all migrations available for your legacy system you can execute the following command to start a full migration process.</p>

<pre><code>$ drupal migrate:execute all --db-type=mysql --db-host=127.0.0.1 --db-name=plato_tipico --db-user=root --db-pass=root --db-port=3306 --no-interaction
</code></pre>

<p>Below you can see how looks the migration process.</p>

<p><img src="http://enzolutions.com/assets/img/console_migrate_execute.png"/></p>

<p>The image above shows how the command report what migrations fail and what migration works. As you can see each migration is independent and the migration process is not interrupted if some of them fail.</p>

<p>But if you want to avoid to execute one of more migration to avoid any exception you can use the parameter <strong>--exclude</strong> providing the migration id(s) do you want to exclude, you can get those ids from <em>migrate:debug</em> command.</p>

<p>Moreover, if you only want to execute one or a couple of migrations, just change the parameter <strong>all</strong> for any migration id(s) do you want, this is useful to execute a partial migration after resolve any issues found after executing a full migration process</p>

<h1>Where are located migrations.</h1>

<p>Now you are wondering <strong>"Where are located migration"</strong> if they aren't in Migrate or Migrate Drupal. Well, migrations are allocated in each specific module, for instance if you review in your Drupal Core modules in path <strong>/core/modules/book/migration_templates</strong> you will find some YAML files with the information necessary to create a Migration entity in your system. When you executed the command <strong>migrate:setup</strong> all migration_templates folder were parsed to create Migration Entities.</p>

<h1>Caveats</h1>

<p>Right now there are mostly migrations available for Drupal 6, I guess the bet is related Drupal 6 are more critical to be migrated to Drupal 8.</p>

<p>You can find more Drupal 7 migration proposed as issues in <a href="http://groups.drupal.org/imp">http://groups.drupal.org/imp</a> sandbox, in <a href="http://anexusit.com">Anexus</a> we propose around 70 migration entities for Drupal 7 and 10 of them were already accepted in Drupal 8 core. I promise to provide a list of all our Drupal 7 Migration in few weeks.</p>

<p>I hope you found this article useful.</p>

    <hr />
    <footer role="contentinfo">
              <ul class="list-unstyled">
                            <li>
                    <i class="fa fa-tags"></i>
                                        <a href="http://enzolutions.com/tags/console">console</a>,                                        <a href="http://enzolutions.com/tags/drupal">drupal</a>,                                        <a href="http://enzolutions.com/tags/drupal8">drupal8</a>,                                        <a href="http://enzolutions.com/tags/migrate">migrate</a>                                    </li>
                                        <li>
                    <i class="fa fa-folder"></i>
                                        <a href="http://enzolutions.com/categories/articles">articles</a>                                    </li>
                    </ul>
          </footer>
  </div><!-- /.article-wrap -->
    <section>
    <h3>Comments</h3>
    <div id="disqus_thread"></div>
    <noscript>
      Please enable JavaScript to view the
      <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a>
    </noscript>
    <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
  </section>

      <script type="text/javascript">
        var disqus_shortname = 'enzolutions';

        (function() {
            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script>
  </article>

</div><!-- /#main -->

<div class="footer-wrap">
  <footer>
    <span>&copy; 2014 - 2017 Eduardo Garcia.</span><br/>
<span>Design by <a target="_blank" href="https://mademistakes.com/">Michael Rose</a></span><br/>
</span></li> Powered by <a target="_blank"href="http://spress.yosymfony.com">Spress </a> 2.2.0, using the <a target="_blank" href="https://github.com/enzolutions/spress-tinto-theme/">Tinto</a> theme.</span>
<br/>
  </footer>
</div><!-- /.footer-wrap -->

<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script>window.jQuery || document.write('<script src="http://enzolutions.com/assets/js/vendor/jquery-1.9.1.min.js"><\/script>')</script>
<script src="http://enzolutions.com/assets/js/scripts.min.js"></script>

<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.4/highlight.min.js"></script>
<script>hljs.initHighlightingOnLoad();</script>


      <!-- Google Analytics Tracker -->
      <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

        ga('create', 'UA-17944133-1', 'enzolutions.com');
        ga('send', 'pageview');
      </script>
      <!-- End of Google Analytics Tracker -->
 </body> 
</html>
